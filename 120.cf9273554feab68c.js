"use strict";(self.webpackChunkastro_pooja=self.webpackChunkastro_pooja||[]).push([[120],{2120:(F,f,i)=>{i.r(f),i.d(f,{ResourceModule:()=>E});var m=i(3060),y=i(7851),x=i(1135),T=i(6451),p=i(4004);class g{constructor(n,e,r=1,a=!1,s=!1){this.category=n,this.pageData=e,this.level=r,this.expandable=a,this.isLoading=s}}class N{constructor(n,e){this._treeControl=n,this.categoryService=e,this.dataChange=new x.X([])}get data(){return this.dataChange.value}set data(n){this._treeControl.dataNodes=n,this.dataChange.next(n)}connect(n){return this._treeControl.expansionModel.changed.subscribe(e=>{(e.added||e.removed)&&this.handleTreeControl(e)}),(0,T.T)(n.viewChange,this.dataChange).pipe((0,p.U)(()=>this.data))}disconnect(n){}handleTreeControl(n){n.added&&n.added.forEach(e=>this.toggleNode(e,!0)),n.removed&&n.removed.slice().reverse().forEach(e=>this.toggleNode(e,!1))}toggleNode(n,e){!n.expandable||this.categoryService.getParent(n.category).pipe((0,p.U)(r=>{let a=[];return r.forEach(s=>{a.push(new g(s.category,s,0,s.isParent))}),a})).subscribe(r=>{const a=r,s=this.data.indexOf(n);!a||s<0||(n.isLoading=!0,setTimeout(()=>{if(e){const c=a.map(d=>new g(d.category,d,n.level+1,d.expandable));this.data.splice(s+1,0,...c)}else{let c=0;for(let d=s+1;d<this.data.length&&this.data[d].level>n.level;d++,c++);this.data.splice(s+1,c)}this.dataChange.next(this.data),n.isLoading=!1},1e3))})}}var t=i(4650),l=i(2340),b=i(529);const h="category";let M=(()=>{class o{constructor(e){this.http=e,this.dataMap=new Map([["\u092a\u0902\u091a\u093e\u0902\u0917",["Apple","Orange","Banana"]],["Vegetables",["Tomato","Potato","Onion"]],["Apple",["Fuji","Macintosh"]],["Onion",["Yellow","White","Purple"]]]),this.rootLevelNodes=["Fruits","Vegetables"]}get(e){return this.http.get(`${l.N.backend_endpoint}${h}/category/${e}`)}getAll(){return this.http.get(`${l.N.backend_endpoint}${h}`)}getParent(e="root"){return this.http.get(`${l.N.backend_endpoint}${h}/parent/${e}`)}getById(e){return this.http.get(`${l.N.backend_endpoint}${h}/${e}`)}getChildren(e){return this.dataMap.get(e)}isExpandable(e){return this.dataMap.has(e)}hasChild(e="root"){return this.http.get(`${l.N.backend_endpoint}${h}/hasChild/${e}`)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(b.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var R=i(6895),C=i(1576),$=i(4859),S=i(7392),H=i(3162),u=i(5423);function L(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-tree-node",6),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.showContent(s))}),t._UZ(1,"button",7),t._uU(2),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(2),t.hij(" ",e.category," ")}}function P(o,n){1&o&&t._UZ(0,"mat-progress-bar",11)}function D(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-tree-node",6),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.showContent(s))}),t.TgZ(1,"button",8)(2,"mat-icon",9),t._uU(3),t.qZA()(),t._uU(4),t.YNc(5,P,1,0,"mat-progress-bar",10),t.qZA()}if(2&o){const e=n.$implicit,r=t.oxw();t.xp6(1),t.uIk("aria-label","Toggle "+e.category),t.xp6(2),t.hij(" ",r.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),t.xp6(1),t.hij(" ",e.category," "),t.xp6(1),t.Q6J("ngIf",e.isLoading)}}let v=(()=>{class o{constructor(e,r){this.route=e,this.categoryService=r,this.getLevel=a=>a.level,this.isExpandable=a=>a.expandable,this.hasChild=(a,s)=>s.expandable,this.treeControl=new y.C2(this.getLevel,this.isExpandable),this.dataSource=new N(this.treeControl,r)}showContent(e){this.content=e.pageData?.pageData?e.pageData?.pageData:e.pageData}ngOnInit(){this.category=this.route.snapshot.paramMap.get("category"),this.getParent(),this.category&&this.getCategory(this.category)}getParent(e="root"){this.categoryService.getParent(e).pipe((0,p.U)(r=>{let a=[];return r.forEach(s=>{a.push(new g(s.category,s,0,s.isParent))}),a})).subscribe(r=>{this.dataSource.data=r,this.category||this.showContent(r[0])})}getCategory(e){this.categoryService.get(e).pipe((0,p.U)(r=>{let a=[];return a.push(new g(r.category,r,0,r.isParent)),a})).subscribe(r=>{this.dataSource.data.concat(r),this.showContent(r[0])})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.gz),t.Y36(M))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-resource-home"]],decls:7,vars:5,consts:[["fxLayout","row"],["fxFlex","20%",3,"dataSource","treeControl"],["matTreeNodePadding","",3,"click",4,"matTreeNodeDef"],["matTreeNodePadding","",3,"click",4,"matTreeNodeDef","matTreeNodeDefWhen"],["fxFlex","80%"],[3,"innerHTML"],["matTreeNodePadding","",3,"click"],["mat-icon-button","","disabled",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],["mode","indeterminate","class","example-tree-progress-bar",4,"ngIf"],["mode","indeterminate",1,"example-tree-progress-bar"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"mat-tree",1),t.YNc(2,L,3,1,"mat-tree-node",2),t.YNc(3,D,6,4,"mat-tree-node",3),t.qZA(),t.TgZ(4,"div",4),t._UZ(5,"h1",5)(6,"div",5),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("dataSource",r.dataSource)("treeControl",r.treeControl),t.xp6(2),t.Q6J("matTreeNodeDefWhen",r.hasChild),t.xp6(2),t.Q6J("innerHTML",null==r.content?null:r.content.category,t.oJD),t.xp6(1),t.Q6J("innerHTML",null==r.content?null:r.content.content,t.oJD))},dependencies:[R.O5,C.xw,C.yH,$.lW,S.Hw,H.pW,u.fQ,u.ah,u.eu,u.gi,u.uo],styles:["mat-tree-node[_ngcontent-%COMP%]{padding-left:1rem}"]}),o})();const A=[{path:"",component:v},{path:":category",component:v}];let Z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.Bz.forChild(A),m.Bz]}),o})();var w=i(3856);let E=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[w.A,Z]}),o})()}}]);